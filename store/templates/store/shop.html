<!-- store/templates/store/shop.html -->
{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-5">

  <!-- Page Title -->
  <h1 class="text-center mb-5">Shop</h1>

  <!-- Categories -->
  {% if categories %}
    <h2 class="h4 mb-3">Categories</h2>
    <div class="mb-4">
      {% for category in categories %}
        <span class="badge bg-secondary me-1">{{ category.name }}</span>
      {% endfor %}
    </div>
  {% endif %}

  <!-- Product Grid -->
  {% if products %}
    <div class="row row-cols-1 row-cols-md-3 g-4">
      {% for product in products %}
        <div class="col">
          <div class="card h-100 shadow-sm">

            {% if product.variants.first %}
              <img src="{{ product.variants.first.image.url }}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="{{ product.name }}">
            {% endif %}

            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ product.name }}</h5>

              {% if product.variants.first %}
                <p class="text-muted small">{{ product.variants.first.description|truncatewords:20 }}</p>
              {% endif %}

              <!-- Product Categories -->
              <div class="mb-2">
                {% for category in product.categories.all %}
                  <span class="badge bg-light text-dark border">{{ category.name }}</span>
                {% endfor %}
              </div>

              <!-- View or Buy -->
              <a href="{% url 'product_detail' product.id %}" class="btn btn-outline-primary mt-auto w-100">View Product</a>
            </div>

          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center text-muted mt-5">
      <h3>No products available</h3>
      <p>Weâ€™re adding more products soon. Stay tuned!</p>
      <img src="{% static 'images/coming-soon.svg' %}" class="img-fluid" style="max-width: 300px;" alt="Coming Soon">
    </div>
  {% endif %}

</div>
{% endblock %}



